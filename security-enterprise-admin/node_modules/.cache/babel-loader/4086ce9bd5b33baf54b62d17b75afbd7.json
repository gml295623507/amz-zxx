{"remainingRequest":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/babel-loader/lib/index.js!/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/eslint-loader/index.js??ref--13-0!/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/src/utils/request.js","dependencies":[{"path":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/src/utils/request.js","mtime":1569313608000},{"path":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _defineProperty from \"/Users/95h/95h-Projects/vue-renren\\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\\u6A21\\u677F/security-enterprise-admin/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport router from '@/router';\nimport qs from 'qs';\nimport { clearLoginInfo } from '@/utils';\nimport isPlainObject from 'lodash/isPlainObject';\nvar http = axios.create({\n  baseURL: window.SITE_CONFIG['apiURL'],\n  timeout: 1000 * 180,\n  withCredentials: true\n});\n/**\r\n * 请求拦截\r\n */\n\nhttp.interceptors.request.use(function (config) {\n  config.headers['Accept-Language'] = Cookies.get('language') || 'zh-CN';\n  config.headers['token'] = Cookies.get('token') || ''; // 默认参数\n\n  var defaults = {}; // 防止缓存，GET请求默认带_t参数\n\n  if (config.method === 'get') {\n    config.params = _objectSpread({}, config.params, {}, {\n      '_t': new Date().getTime()\n    });\n  }\n\n  if (isPlainObject(config.params)) {\n    config.params = _objectSpread({}, defaults, {}, config.params);\n  }\n\n  if (isPlainObject(config.data)) {\n    config.data = _objectSpread({}, defaults, {}, config.data);\n\n    if (/^application\\/x-www-form-urlencoded/.test(config.headers['content-type'])) {\n      config.data = qs.stringify(config.data);\n    }\n  }\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\n/**\r\n * 响应拦截\r\n */\n\nhttp.interceptors.response.use(function (response) {\n  if (response.data.code === 401 || response.data.code === 10001) {\n    clearLoginInfo();\n    router.replace({\n      name: 'login'\n    });\n    return Promise.reject(response.data.msg);\n  }\n\n  return response;\n}, function (error) {\n  console.error(error);\n  return Promise.reject(error);\n});\nexport default http;",{"version":3,"sources":["/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/src/utils/request.js"],"names":["axios","Cookies","router","qs","clearLoginInfo","isPlainObject","http","create","baseURL","window","SITE_CONFIG","timeout","withCredentials","interceptors","request","use","config","headers","get","defaults","method","params","Date","getTime","data","test","stringify","error","Promise","reject","response","code","replace","name","msg","console"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,cAAT,QAA+B,SAA/B;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AAEA,IAAMC,IAAI,GAAGN,KAAK,CAACO,MAAN,CAAa;AACxBC,EAAAA,OAAO,EAAEC,MAAM,CAACC,WAAP,CAAmB,QAAnB,CADe;AAExBC,EAAAA,OAAO,EAAE,OAAO,GAFQ;AAGxBC,EAAAA,eAAe,EAAE;AAHO,CAAb,CAAb;AAMA;;;;AAGAN,IAAI,CAACO,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACtCA,EAAAA,MAAM,CAACC,OAAP,CAAe,iBAAf,IAAoChB,OAAO,CAACiB,GAAR,CAAY,UAAZ,KAA2B,OAA/D;AACAF,EAAAA,MAAM,CAACC,OAAP,CAAe,OAAf,IAA0BhB,OAAO,CAACiB,GAAR,CAAY,OAAZ,KAAwB,EAAlD,CAFsC,CAGtC;;AACA,MAAIC,QAAQ,GAAG,EAAf,CAJsC,CAKtC;;AACA,MAAIH,MAAM,CAACI,MAAP,KAAkB,KAAtB,EAA6B;AAC3BJ,IAAAA,MAAM,CAACK,MAAP,qBACKL,MAAM,CAACK,MADZ,MAEK;AAAE,YAAM,IAAIC,IAAJ,GAAWC,OAAX;AAAR,KAFL;AAID;;AACD,MAAIlB,aAAa,CAACW,MAAM,CAACK,MAAR,CAAjB,EAAkC;AAChCL,IAAAA,MAAM,CAACK,MAAP,qBACKF,QADL,MAEKH,MAAM,CAACK,MAFZ;AAID;;AACD,MAAIhB,aAAa,CAACW,MAAM,CAACQ,IAAR,CAAjB,EAAgC;AAC9BR,IAAAA,MAAM,CAACQ,IAAP,qBACKL,QADL,MAEKH,MAAM,CAACQ,IAFZ;;AAIA,QAAI,sCAAsCC,IAAtC,CAA2CT,MAAM,CAACC,OAAP,CAAe,cAAf,CAA3C,CAAJ,EAAgF;AAC9ED,MAAAA,MAAM,CAACQ,IAAP,GAAcrB,EAAE,CAACuB,SAAH,CAAaV,MAAM,CAACQ,IAApB,CAAd;AACD;AACF;;AACD,SAAOR,MAAP;AACD,CA5BD,EA4BG,UAAAW,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CA9BD;AAgCA;;;;AAGArB,IAAI,CAACO,YAAL,CAAkBiB,QAAlB,CAA2Bf,GAA3B,CAA+B,UAAAe,QAAQ,EAAI;AACzC,MAAIA,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,GAAvB,IAA8BD,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,KAAzD,EAAgE;AAC9D3B,IAAAA,cAAc;AACdF,IAAAA,MAAM,CAAC8B,OAAP,CAAe;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAf;AACA,WAAOL,OAAO,CAACC,MAAR,CAAeC,QAAQ,CAACN,IAAT,CAAcU,GAA7B,CAAP;AACD;;AACD,SAAOJ,QAAP;AACD,CAPD,EAOG,UAAAH,KAAK,EAAI;AACVQ,EAAAA,OAAO,CAACR,KAAR,CAAcA,KAAd;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAVD;AAYA,eAAerB,IAAf","sourcesContent":["import axios from 'axios'\r\nimport Cookies from 'js-cookie'\r\nimport router from '@/router'\r\nimport qs from 'qs'\r\nimport { clearLoginInfo } from '@/utils'\r\nimport isPlainObject from 'lodash/isPlainObject'\r\n\r\nconst http = axios.create({\r\n  baseURL: window.SITE_CONFIG['apiURL'],\r\n  timeout: 1000 * 180,\r\n  withCredentials: true\r\n})\r\n\r\n/**\r\n * 请求拦截\r\n */\r\nhttp.interceptors.request.use(config => {\r\n  config.headers['Accept-Language'] = Cookies.get('language') || 'zh-CN'\r\n  config.headers['token'] = Cookies.get('token') || ''\r\n  // 默认参数\r\n  var defaults = {}\r\n  // 防止缓存，GET请求默认带_t参数\r\n  if (config.method === 'get') {\r\n    config.params = {\r\n      ...config.params,\r\n      ...{ '_t': new Date().getTime() }\r\n    }\r\n  }\r\n  if (isPlainObject(config.params)) {\r\n    config.params = {\r\n      ...defaults,\r\n      ...config.params\r\n    }\r\n  }\r\n  if (isPlainObject(config.data)) {\r\n    config.data = {\r\n      ...defaults,\r\n      ...config.data\r\n    }\r\n    if (/^application\\/x-www-form-urlencoded/.test(config.headers['content-type'])) {\r\n      config.data = qs.stringify(config.data)\r\n    }\r\n  }\r\n  return config\r\n}, error => {\r\n  return Promise.reject(error)\r\n})\r\n\r\n/**\r\n * 响应拦截\r\n */\r\nhttp.interceptors.response.use(response => {\r\n  if (response.data.code === 401 || response.data.code === 10001) {\r\n    clearLoginInfo()\r\n    router.replace({ name: 'login' })\r\n    return Promise.reject(response.data.msg)\r\n  }\r\n  return response\r\n}, error => {\r\n  console.error(error)\r\n  return Promise.reject(error)\r\n})\r\n\r\nexport default http\r\n"]}]}