{"remainingRequest":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/babel-loader/lib/index.js!/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/src/views/modules/oss/oss-upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/src/views/modules/oss/oss-upload.vue","mtime":1569313608000},{"path":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/cache-loader/dist/cjs.js","mtime":1593769583426},{"path":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/babel-loader/lib/index.js","mtime":1593769580300},{"path":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/cache-loader/dist/cjs.js","mtime":1593769583426},{"path":"/Users/95h/95h-Projects/vue-renren后台管理系统模板/security-enterprise-admin/node_modules/vue-loader/lib/index.js","mtime":1593769583804}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Cookies from 'js-cookie';\nexport default {\n  data: function data() {\n    return {\n      visible: false,\n      url: '',\n      num: 0,\n      fileList: []\n    };\n  },\n  methods: {\n    init: function init() {\n      this.visible = true;\n      this.url = \"\".concat(window.SITE_CONFIG['apiURL'], \"/sys/oss/upload?token=\").concat(Cookies.get('token'));\n      this.num = 0;\n      this.fileList = [];\n    },\n    // 上传之前\n    beforeUploadHandle: function beforeUploadHandle(file) {\n      if (file.type !== 'image/jpg' && file.type !== 'image/jpeg' && file.type !== 'image/png' && file.type !== 'image/gif') {\n        this.$message.error(this.$t('upload.tip', {\n          'format': 'jpg、png、gif'\n        }));\n        return false;\n      }\n\n      this.num++;\n    },\n    // 上传成功\n    successHandle: function successHandle(res, file, fileList) {\n      var _this = this;\n\n      if (res.code !== 0) {\n        return this.$message.error(res.msg);\n      }\n\n      this.fileList = fileList;\n      this.num--;\n\n      if (this.num === 0) {\n        this.$message({\n          message: this.$t('prompt.success'),\n          type: 'success',\n          duration: 500,\n          onClose: function onClose() {\n            _this.visible = false;\n\n            _this.$emit('refreshDataList');\n          }\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["oss-upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAkBA,OAAA,OAAA,MAAA,WAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,GAAA,EAAA,CAHA;AAIA,MAAA,QAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,GAAA,aAAA,MAAA,CAAA,WAAA,CAAA,QAAA,CAAA,mCAAA,OAAA,CAAA,GAAA,CAAA,OAAA,CAAA;AACA,WAAA,GAAA,GAAA,CAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,KANA;AAOA;AACA,IAAA,kBARA,8BAQA,IARA,EAQA;AACA,UAAA,IAAA,CAAA,IAAA,KAAA,WAAA,IAAA,IAAA,CAAA,IAAA,KAAA,YAAA,IAAA,IAAA,CAAA,IAAA,KAAA,WAAA,IAAA,IAAA,CAAA,IAAA,KAAA,WAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,KAAA,EAAA,CAAA,YAAA,EAAA;AAAA,oBAAA;AAAA,SAAA,CAAA;AACA,eAAA,KAAA;AACA;;AACA,WAAA,GAAA;AACA,KAdA;AAeA;AACA,IAAA,aAhBA,yBAgBA,GAhBA,EAgBA,IAhBA,EAgBA,QAhBA,EAgBA;AAAA;;AACA,UAAA,GAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,eAAA,KAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,CAAA;AACA;;AACA,WAAA,QAAA,GAAA,QAAA;AACA,WAAA,GAAA;;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA;AACA,UAAA,OAAA,EAAA,KAAA,EAAA,CAAA,gBAAA,CADA;AAEA,UAAA,IAAA,EAAA,SAFA;AAGA,UAAA,QAAA,EAAA,GAHA;AAIA,UAAA,OAAA,EAAA,mBAAA;AACA,YAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,YAAA,KAAA,CAAA,KAAA,CAAA,iBAAA;AACA;AAPA,SAAA;AASA;AACA;AAjCA;AATA,CAAA","sourcesContent":["<template>\r\n  <el-dialog :visible.sync=\"visible\" :title=\"$t('oss.upload')\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\">\r\n    <el-upload\r\n      :action=\"url\"\r\n      :file-list=\"fileList\"\r\n      drag\r\n      multiple\r\n      :before-upload=\"beforeUploadHandle\"\r\n      :on-success=\"successHandle\"\r\n      class=\"text-center\">\r\n      <i class=\"el-icon-upload\"></i>\r\n      <div class=\"el-upload__text\" v-html=\"$t('upload.text')\"></div>\r\n      <div class=\"el-upload__tip\" slot=\"tip\">{{ $t('upload.tip', { 'format': 'jpg、png、gif' }) }}</div>\r\n    </el-upload>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from 'js-cookie'\r\nexport default {\r\n  data () {\r\n    return {\r\n      visible: false,\r\n      url: '',\r\n      num: 0,\r\n      fileList: []\r\n    }\r\n  },\r\n  methods: {\r\n    init () {\r\n      this.visible = true\r\n      this.url = `${window.SITE_CONFIG['apiURL']}/sys/oss/upload?token=${Cookies.get('token')}`\r\n      this.num = 0\r\n      this.fileList = []\r\n    },\r\n    // 上传之前\r\n    beforeUploadHandle (file) {\r\n      if (file.type !== 'image/jpg' && file.type !== 'image/jpeg' && file.type !== 'image/png' && file.type !== 'image/gif') {\r\n        this.$message.error(this.$t('upload.tip', { 'format': 'jpg、png、gif' }))\r\n        return false\r\n      }\r\n      this.num++\r\n    },\r\n    // 上传成功\r\n    successHandle (res, file, fileList) {\r\n      if (res.code !== 0) {\r\n        return this.$message.error(res.msg)\r\n      }\r\n      this.fileList = fileList\r\n      this.num--\r\n      if (this.num === 0) {\r\n        this.$message({\r\n          message: this.$t('prompt.success'),\r\n          type: 'success',\r\n          duration: 500,\r\n          onClose: () => {\r\n            this.visible = false\r\n            this.$emit('refreshDataList')\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views/modules/oss"}]}